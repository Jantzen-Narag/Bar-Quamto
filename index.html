<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Compiled Bar Q&A</title>
  <style>
    /* ... keep all your current CSS ... */
  </style>
</head>
<body class="day">

  <!-- TOP BAR -->
  <div class="top-bar-container">
    <div class="top-bar-box">
      <label for="subjectSelect">Subject:</label>
      <select id="subjectSelect">
        <option value="Any">Any</option>
        <option>Political and International Law</option>
        <option>Labor Law and Social Legislation</option>
        <option>Civil Law</option>
        <option>Taxation</option>
        <option>Mercantile Law</option>
        <option>Criminal Law</option>
        <option>Remedial Law</option>
        <option>Legal and Judicial Ethics</option>
      </select>
    </div>

    <div class="top-bar-box">
      <div id="timer">00:00</div>
      <label for="fontSize">Font:</label>
      <select id="fontSize">
        <option value="24px">24px</option>
        <option value="28px">28px</option>
        <option value="32px" selected>32px</option>
        <option value="36px">36px</option>
      </select>
      <span id="themeToggle" class="toggle-icon" title="Toggle Theme">üåì</span>
    </div>
  </div>

  <!-- TITLE -->
  <h1>Bar Q&A Practice</h1>

  <!-- COUNTER & LABEL -->
  <div id="counter">Questions Remaining: --</div>
  <div id="subjectLabel"></div>

  <!-- QUESTION CARD -->
  <div class="card" id="questionCard">
    <div id="question" style="font-size: 32px;"></div>

    <!-- User Answer Box -->
    <textarea id="userInput" placeholder="Type your answer here..."></textarea>

    <!-- Show Answer Button -->
    <div class="button-row">
      <button id="toggleAnswerBtn">Show/Hide Answer</button>
    </div>

    <!-- Answer Block -->
    <div id="answer"></div>
  </div>

  <!-- GENERATE BUTTON -->
  <button id="generateBtn">Generate Question</button>

  <!-- Highlight Button -->
  <button id="highlightBtn" onclick="highlightSelection()">üñçÔ∏è</button>

  <script>
    // Highlighting function
    function highlightSelection() {
      const selection = window.getSelection();
      if (!selection.rangeCount) return;
      const range = selection.getRangeAt(0);
      const span = document.createElement("span");
      span.style.backgroundColor = "yellow";
      span.style.color = "black";
      range.surroundContents(span);
      selection.removeAllRanges();
    }

    // Dummy data for question/answer - Replace with real logic later
    const qaData = [
      { subject: "Political and International Law", question: "What is sovereignty?", answer: "Sovereignty is the supreme power of the state to govern itself or another state." },
      { subject: "Civil Law", question: "What is a contract?", answer: "A contract is a meeting of minds between two persons whereby one binds himself with respect to the other to give something or to render some service." }
    ];

    const questionEl = document.getElementById("question");
    const answerEl = document.getElementById("answer");
    const userInput = document.getElementById("userInput");
    const counterEl = document.getElementById("counter");
    const subjectLabel = document.getElementById("subjectLabel");
    const fontSizeSelect = document.getElementById("fontSize");
    const themeToggle = document.getElementById("themeToggle");

    let remainingQuestions = [...qaData];

    // Toggle day/night theme
    themeToggle.addEventListener("click", () => {
      document.body.classList.toggle("night");
      document.body.classList.toggle("day");
    });

    // Font size changer
    fontSizeSelect.addEventListener("change", () => {
      const size = fontSizeSelect.value;
      questionEl.style.fontSize = size;
      userInput.style.fontSize = size;
      answerEl.style.fontSize = size;
    });

    // Show/hide answer
    document.getElementById("toggleAnswerBtn").addEventListener("click", () => {
      answerEl.style.display = answerEl.style.display === "none" ? "block" : "none";

      // Show question and answer side-by-side
      document.getElementById("questionCard").style.display = "flex";
      document.getElementById("questionCard").style.flexDirection = "row";
      document.getElementById("question").style.width = "50%";
      userInput.style.width = "50%";
    });

    // Generate question
    document.getElementById("generateBtn").addEventListener("click", () => {
      const subject = document.getElementById("subjectSelect").value;

      let filtered = subject === "Any" ? qaData : qaData.filter(q => q.subject === subject);

      if (filtered.length === 0) {
        questionEl.innerText = `No Question under ${subject} Subject Yet. Still being encoded.`;
        answerEl.innerText = "";
        userInput.value = "";
        subjectLabel.innerText = "";
        return;
      }

      const item = filtered[Math.floor(Math.random() * filtered.length)];
      questionEl.innerText = item.question;
      answerEl.innerText = item.answer;
      userInput.value = "";
      answerEl.style.display = "none";

      subjectLabel.innerText = subject === "Any" ? `Question on ${item.subject} Subject` : "";

      counterEl.innerText = `Questions Remaining: ${filtered.length}`;
      
      // Reset layout to vertical
      document.getElementById("questionCard").style.flexDirection = "column";
      questionEl.style.width = "100%";
      userInput.style.width = "90%";
    });

    // Initial render
    questionEl.innerText = "Click 'Generate Question' to begin.";
  </script>
</body>
</html>
